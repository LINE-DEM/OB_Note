

## 1. 结论摘要

- VAD 延迟主要由采集分块与平滑判定造成，常见量级约 150~200 ms。

- ASR（建连到首个回复包）延迟样本区间约 723~1034 ms（见样本数据），整体平均值需以全量统计为准。

- VAD+ASR 端到端总延迟常见约 800~1200 ms（需结合场景与网络条件确认）。

- 性能对比：CPU 时间与波动未见明显差异。

  开发时间：6 - 10 个工作日


## 2. 测试方法（摘要）

### 2.1 VAD 延迟定义

从“音频进入采集缓冲”到“VAD 输出判定”的总时延，拆分为：

- 采集分块时长（约 100 ms）

- 平滑/阈值跨越（约 32~64 ms）

- 处理线程等待（0~10 ms）

- 切回主线程（0~16 ms）

- 模型推理（<1 ms）

  

### 2.2 ASR 延迟定义

从“建立连接开始”到“收到首个回复包”的时延（讯飞 IAT）。

  

## 3. 数据与结果

### 3.1 VAD 延迟估算

```

总延迟 ≈ 采集chunk(≈100ms)

       + 平滑/阈值跨越(≈32~64ms)

       + 处理线程等待(0~10ms)

       + 切回主线程(0~16ms)

       + 模型推理(<1ms)

≈ 150~200ms（常见量级）

```

备注：参数与时延均为估算值，需根据实际采样率、分块大小、平滑策略确认。

  

### 3.2 ASR 延迟样本（建连到首包）

样本值（ms）：

- 729.2106

- 785.6852

- 722.9916

- 1034.1811

- 730.7594

  

统计说明（基于上述 5 条样本）：

- 区间：约 723 ~ 1034 ms

- 样本均值：约 800.6 ms

  

### 3.3 VAD + ASR 总延迟

估算区间：约 800~1200 ms（需结合全量 ASR 平均值与 VAD 参数确认）。

  

## 4. 性能对比结论

- 结论：性能无明显差别，CPU 时间波动无明显增加。

  

## 5. 风险与后续建议

- 网络波动对 ASR 首包时延影响较大，需标注网络条件。

- 采样率与分块大小会改变 VAD 端到端时延，需记录具体参数。
- 部署条件增加一条 需要安装新版本的vc++运行时  Microsoft Visual C++ 2015-2022 Redistributable (x64)

## 6. 估时拆分

以下时间为开发+本地验证的预估工时（单位：工作日，1 日=8 小时）。

  

|   模块    |                          工作内容                         |  预计时间  |



| 需求对齐 | 明确 UI 状态、长对话行为、错误提示方式 | 0.5 - 1 |

| 结构梳理 | 统一链路入口、收敛状态机与职责边界 |  2 |

| VAD/ASR | 建立API层 和control层 用来控制复杂UI | 2 |

| UI 接入 | 录音/识别/错误/长对话状态 UI 联动 |  2 |

| 回归验证 | Editor 与打包验证，关键路径回归 | 0.5 - 1 |

  

**预计总工期：6 - 10 个工作日**